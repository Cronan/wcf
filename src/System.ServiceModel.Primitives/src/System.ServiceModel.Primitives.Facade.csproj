<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <AssemblyVersion>4.6.0.0</AssemblyVersion>
    <!--<TargetFrameworks>MonoAndroid10;MonoTouch10;net45;net46;net461;netcore50;netcoreapp2.1;netstandard1.0;netstandard1.1;netstandard1.3;netstandard2.0;portable-net45+win8+wp8;win8;wp8;xamarinios10;xamarinmac20;xamarintvos10;xamarinwatchos10</TargetFrameworks>-->
    <TargetFrameworks>MonoAndroid10;MonoTouch10;net45;net46;net461;netcore50;netstandard1.0;netstandard1.1;netstandard1.3;netstandard2.0;portable-net45+win8+wp8;win8;wp8;xamarinios10;xamarinmac20;xamarintvos10;xamarinwatchos10</TargetFrameworks>
    <AssemblyName>System.ServiceModel.Primitives</AssemblyName>
    <CLSCompliant>true</CLSCompliant>
    <IsPackable>true</IsPackable>
  </PropertyGroup>

  <ItemGroup Condition="'$(TargetFramework)' == 'netcoreapp2.1' Or '$(TargetFramework)' == 'netstandard2.0'">
    <ProjectReference Include="..\..\System.Private.ServiceModel\src\System.Private.ServiceModel.csproj" />
    
    <!-- bring in the System.ServiceModel shim for desktop compat -->
    <ProjectReference Include="..\..\System.ServiceModel.Shim\System.ServiceModel.Shim.csproj"
                      ReferenceOutputAssembly="false"
                      OutputItemType="TfmSpecificPackageFile"
                      PackagePath="ref/$(TargetFramework);lib/$(TargetFramework)" />
  </ItemGroup>

  <!-- non-building TargetFrameworks copy from old package -->
  <PropertyGroup Condition="'$(TargetFramework)' != 'netstandard2.0' And '$(TargetFramework)' != 'netcoreapp2.1'">
    <IsPartialFacadeAssembly>false</IsPartialFacadeAssembly>
    <HarvestFromPackage>true</HarvestFromPackage>
  </PropertyGroup>

  <!-- Don't generate facade for netcoreapp2.1, no new API added, just a new property only supported on netcoreapp2.1 -->
  <PropertyGroup Condition="'$(TargetFramework)' == 'netcoreapp2.1'">
    <IsPartialFacadeAssembly>false</IsPartialFacadeAssembly>
    <HarvestFromPackage>false</HarvestFromPackage>
  </PropertyGroup>
  
  <!-- the following represent dependencies copied from the old package -->
  <ItemGroup Condition="'$(TargetFramework)' == 'net45'">
    <Reference Include="System.ServiceModel" />
  </ItemGroup>
  <ItemGroup Condition="'$(TargetFramework)' == 'net46'">
    <PackageReference Include="NETStandard.Library" Version="1.6.1" />
    <Reference Include="System.IdentityModel" />
    <Reference Include="System.ServiceModel" />
  </ItemGroup>
  <ItemGroup Condition="'$(TargetFramework)' == 'net461'">
    <Reference Include="System.IdentityModel" />
    <Reference Include="System.ServiceModel" />
  </ItemGroup>  
  <ItemGroup Condition="'$(TargetFramework)' == 'netcore50'">
    <PackageReference Include="NETStandard.Library" Version="1.6.1" />
    <PackageReference Include="System.ComponentModel.EventBasedAsync" Version="4.3.0" />
    <PackageReference Include="System.Private.ServiceModel" Version="4.5.3" ExcludeAssets="Compile" />
    <PackageReference Include="System.Runtime.Serialization.Primitives" Version="4.3.0" />
    <PackageReference Include="System.Runtime.Serialization.Xml" Version="4.3.0" />
    <PackageReference Include="System.Security.Principal" Version="4.3.0" />
  </ItemGroup>
  <ItemGroup Condition="'$(TargetFramework)' == 'netstandard1.0'">
    <PackageReference Include="System.ComponentModel.EventBasedAsync" Version="4.3.0" />
    <PackageReference Include="System.Runtime.Serialization.Primitives" Version="4.3.0" />
    <PackageReference Include="System.Runtime.Serialization.Xml" Version="4.3.0" />
  </ItemGroup>
  <ItemGroup Condition="'$(TargetFramework)' == 'netstandard1.1'">
    <PackageReference Include="System.ComponentModel.EventBasedAsync" Version="4.3.0" />
    <PackageReference Include="System.Runtime.Serialization.Primitives" Version="4.3.0" />
    <PackageReference Include="System.Runtime.Serialization.Xml" Version="4.3.0" />
    <PackageReference Include="System.Security.Principal" Version="4.3.0" />
  </ItemGroup>
  <ItemGroup Condition="'$(TargetFramework)' == 'netstandard1.3'">
    <PackageReference Include="System.ComponentModel.EventBasedAsync" Version="4.3.0" />
    <PackageReference Include="System.Private.ServiceModel" Version="4.5.3" ExcludeAssets="Compile" />
    <PackageReference Include="System.Runtime.Serialization.Primitives" Version="4.3.0" />
    <PackageReference Include="System.Runtime.Serialization.Xml" Version="4.3.0" />
    <PackageReference Include="System.Security.Principal" Version="4.3.0" />
  </ItemGroup>
</Project>
